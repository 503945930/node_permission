{"version":3,"sources":["error-response.js"],"names":[],"mappings":"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","file":"error-response-compiled.js","sourcesContent":["(function () {\n  /*global describe, it*/\n\n  'use strict';\n\n  var should = require('should'),\n    express = require('express'),\n    supertest = require('supertest'),\n    cors = require('../lib');\n\n  var app;\n\n  /* -------------------------------------------------------------------------- */\n\n  app = express();\n  app.use(cors());\n\n  app.post('/five-hundred', function (req, res, next) {\n    next(new Error('nope'));\n  });\n\n  app.post('/four-oh-one', function (req, res, next) {\n    next(new Error('401'));\n  });\n\n  app.post('/four-oh-four', function (req, res, next) {\n    next();\n  });\n\n  app.use(function (err, req, res, next) {\n    if (err.message === '401') {\n      res.status(401).send('unauthorized');\n    } else {\n      next(err);\n    }\n  });\n\n  /* -------------------------------------------------------------------------- */\n\n  describe('error response', function () {\n    it('500', function (done) {\n      supertest(app)\n        .post('/five-hundred')\n        .expect(500)\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('*');\n          res.text.should.startWith('Error: nope');\n          done();\n        });\n    });\n\n    it('401', function (done) {\n      supertest(app)\n        .post('/four-oh-one')\n        .expect(401)\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('*');\n          res.text.should.eql('unauthorized');\n          done();\n        });\n    });\n\n    it('404', function (done) {\n      supertest(app)\n        .post('/four-oh-four')\n        .expect(404)\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('*');\n          done();\n        });\n    });\n  });\n\n}());\n"]}