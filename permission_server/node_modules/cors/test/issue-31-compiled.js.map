{"version":3,"sources":["issue-31.js"],"names":[],"mappings":";;AAAA,AAAC,CAAA,YAAY;;;AAGX,cAAY,CAAC;;AAEb,MAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC;MAC5B,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC;MAC5B,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC;MAChC,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE3B,MAAI,GAAG,EACL,UAAU,EACV,WAAW,CAAC;;;;AAId,aAAW,GAAG,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC;AACnC,aAAW,CAAC,GAAG,CAAC,GAAG,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE;AACvC,OAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;GACzB,CAAC,CAAC;;AAEH,YAAU,GAAG,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC;AAClC,YAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;;AAEtC,KAAG,GAAG,OAAO,EAAE,CAAC;AAChB,KAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AAChB,KAAG,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;;;;AAIpB,UAAQ,CAAC,YAAY,EAAE,YAAY;AACjC,MAAE,CAAC,eAAe,EAAE,UAAU,IAAI,EAAE;AAClC,eAAS,CAAC,GAAG,CAAC,CACX,OAAO,CAAC,QAAQ,CAAC,CACjB,MAAM,CAAC,GAAG,CAAC,CACX,GAAG,CAAC,QAAQ,EAAE,oBAAoB,CAAC,CACnC,GAAG,CAAC,UAAU,GAAG,EAAE,GAAG,EAAE;AACvB,cAAM,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACtB,WAAG,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC3D,YAAI,EAAE,CAAC;OACR,CAAC,CAAC;KACN,CAAC,CAAC;;AAEH,MAAE,CAAC,WAAW,EAAE,UAAU,IAAI,EAAE;AAC9B,eAAS,CAAC,GAAG,CAAC,CACX,GAAG,CAAC,QAAQ,CAAC,CACb,MAAM,CAAC,GAAG,CAAC,CACX,GAAG,CAAC,QAAQ,EAAE,oBAAoB,CAAC,CACnC,GAAG,CAAC,UAAU,GAAG,EAAE,GAAG,EAAE;AACvB,cAAM,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACtB,WAAG,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC3D,WAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AACnC,YAAI,EAAE,CAAC;OACR,CAAC,CAAC;KACN,CAAC,CAAC;GACJ,CAAC,CAAC;CAEJ,CAAA,EAAE,CAAE","file":"issue-31-compiled.js","sourcesContent":["(function () {\n  /*global describe, it*/\n\n  'use strict';\n\n  var should = require('should'),\n    express = require('express'),\n    supertest = require('supertest'),\n    cors = require('../lib');\n\n  var app,\n    mainRouter,\n    itemsRouter;\n\n  /* -------------------------------------------------------------------------- */\n\n  itemsRouter = new express.Router();\n  itemsRouter.get('/', function (req, res) {\n    res.send('hello world');\n  });\n\n  mainRouter = new express.Router();\n  mainRouter.use('/items', itemsRouter);\n\n  app = express();\n  app.use(cors());\n  app.use(mainRouter);\n\n  /* -------------------------------------------------------------------------- */\n\n  describe('issue  #31', function () {\n    it('OPTIONS works', function (done) {\n      supertest(app)\n        .options('/items')\n        .expect(204)\n        .set('Origin', 'http://example.com')\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('*');\n          done();\n        });\n    });\n\n    it('GET works', function (done) {\n      supertest(app)\n        .get('/items')\n        .expect(200)\n        .set('Origin', 'http://example.com')\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('*');\n          res.text.should.eql('hello world');\n          done();\n        });\n    });\n  });\n\n}());\n"]}