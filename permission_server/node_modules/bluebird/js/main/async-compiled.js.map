{"version":3,"sources":["async.js"],"names":[],"mappings":"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","file":"async-compiled.js","sourcesContent":["\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = require(\"./schedule.js\");\nvar Queue = require(\"./queue.js\");\nvar _process = typeof process !== \"undefined\" ? process : undefined;\n\nfunction Async() {\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule =\n        schedule.isStatic ? schedule(this.drainQueues) : schedule;\n}\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._normalQueue.length() > 0;\n};\n\nAsync.prototype._withDomain = function(fn) {\n    if (_process !== undefined &&\n        _process.domain != null &&\n        !fn.domain) {\n        fn = _process.domain.bind(fn);\n    }\n    return fn;\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    fn = this._withDomain(fn);\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/m3OTXk\\u000a\");\n    }\n};\n\nAsync.prototype.invokeLater = function (fn, receiver, arg) {\n    fn = this._withDomain(fn);\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n};\n\nAsync.prototype.invokeFirst = function (fn, receiver, arg) {\n    fn = this._withDomain(fn);\n    this._normalQueue.unshift(fn, receiver, arg);\n    this._queueTick();\n};\n\nAsync.prototype.invoke = function (fn, receiver, arg) {\n    fn = this._withDomain(fn);\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n};\n\nAsync.prototype.settlePromises = function(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n};\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = new Async();\nmodule.exports.firstLineError = firstLineError;\n"]}