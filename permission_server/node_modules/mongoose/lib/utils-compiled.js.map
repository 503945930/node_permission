{"version":3,"sources":["utils.js"],"names":[],"mappings":"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","file":"utils-compiled.js","sourcesContent":["/*!\n * Module dependencies.\n */\n\nvar mongodb = require('mongodb');\nvar ObjectId = require('./types/objectid');\nvar cloneRegExp = require('regexp-clone');\nvar sliced = require('sliced');\nvar mpath = require('mpath');\nvar ms = require('ms');\nvar MongooseBuffer;\nvar MongooseArray;\nvar Document;\n\nvar ReadPref = !!mongodb ? mongodb.ReadPreference : function(v) { return v; };\n\n/*!\n * Produces a collection name from model `name`.\n *\n * @param {String} name a model name\n * @return {String} a collection name\n * @api private\n */\n\nexports.toCollectionName = function (name, options) {\n  options = options || {};\n  if ('system.profile' === name) return name;\n  if ('system.indexes' === name) return name;\n  if (options.pluralization === false) return name;\n  return pluralize(name.toLowerCase());\n};\n\n/**\n * Pluralization rules.\n *\n * These rules are applied while processing the argument to `toCollectionName`.\n *\n * @deprecated remove in 4.x gh-1350\n */\n\nexports.pluralization = [\n  [/(m)an$/gi, '$1en'],\n  [/(pe)rson$/gi, '$1ople'],\n  [/(child)$/gi, '$1ren'],\n  [/^(ox)$/gi, '$1en'],\n  [/(ax|test)is$/gi, '$1es'],\n  [/(octop|vir)us$/gi, '$1i'],\n  [/(alias|status)$/gi, '$1es'],\n  [/(bu)s$/gi, '$1ses'],\n  [/(buffal|tomat|potat)o$/gi, '$1oes'],\n  [/([ti])um$/gi, '$1a'],\n  [/sis$/gi, 'ses'],\n  [/(?:([^f])fe|([lr])f)$/gi, '$1$2ves'],\n  [/(hive)$/gi, '$1s'],\n  [/([^aeiouy]|qu)y$/gi, '$1ies'],\n  [/(x|ch|ss|sh)$/gi, '$1es'],\n  [/(matr|vert|ind)ix|ex$/gi, '$1ices'],\n  [/([m|l])ouse$/gi, '$1ice'],\n  [/(kn|w|l)ife$/gi, '$1ives'],\n  [/(quiz)$/gi, '$1zes'],\n  [/s$/gi, 's'],\n  [/([^a-z])$/, '$1'],\n  [/$/gi, 's']\n];\nvar rules = exports.pluralization;\n\n/**\n * Uncountable words.\n *\n * These words are applied while processing the argument to `toCollectionName`.\n * @api public\n */\n\nexports.uncountables = [\n  'advice',\n  'energy',\n  'excretion',\n  'digestion',\n  'cooperation',\n  'health',\n  'justice',\n  'labour',\n  'machinery',\n  'equipment',\n  'information',\n  'pollution',\n  'sewage',\n  'paper',\n  'money',\n  'species',\n  'series',\n  'rain',\n  'rice',\n  'fish',\n  'sheep',\n  'moose',\n  'deer',\n  'news',\n  'expertise',\n  'status',\n  'media'\n];\nvar uncountables = exports.uncountables;\n\n/*!\n * Pluralize function.\n *\n * @author TJ Holowaychuk (extracted from _ext.js_)\n * @param {String} string to pluralize\n * @api private\n */\n\nfunction pluralize (str) {\n  var rule, found;\n  if (!~uncountables.indexOf(str.toLowerCase())){\n    found = rules.filter(function(rule){\n      return str.match(rule[0]);\n    });\n    if (found[0]) return str.replace(found[0][0], found[0][1]);\n  }\n  return str;\n};\n\n/*!\n * Determines if `a` and `b` are deep equal.\n *\n * Modified from node/lib/assert.js\n *\n * @param {any} a a value to compare to `b`\n * @param {any} b a value to compare to `a`\n * @return {Boolean}\n * @api private\n */\n\nexports.deepEqual = function deepEqual (a, b) {\n  if (a === b) return true;\n\n  if (a instanceof Date && b instanceof Date)\n    return a.getTime() === b.getTime();\n\n  if (a instanceof ObjectId && b instanceof ObjectId) {\n    return a.toString() === b.toString();\n  }\n\n  if (a instanceof RegExp && b instanceof RegExp) {\n    return a.source == b.source &&\n           a.ignoreCase == b.ignoreCase &&\n           a.multiline == b.multiline &&\n           a.global == b.global;\n  }\n\n  if (typeof a !== 'object' && typeof b !== 'object')\n    return a == b;\n\n  if (a === null || b === null || a === undefined || b === undefined)\n    return false\n\n  if (a.prototype !== b.prototype) return false;\n\n  // Handle MongooseNumbers\n  if (a instanceof Number && b instanceof Number) {\n    return a.valueOf() === b.valueOf();\n  }\n\n  if (Buffer.isBuffer(a)) {\n    return exports.buffer.areEqual(a, b);\n  }\n\n  if (isMongooseObject(a)) a = a.toObject();\n  if (isMongooseObject(b)) b = b.toObject();\n\n  try {\n    var ka = Object.keys(a),\n        kb = Object.keys(b),\n        key, i;\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key])) return false;\n  }\n\n  return true;\n};\n\n/*!\n * Object clone with Mongoose natives support.\n *\n * If options.minimize is true, creates a minimal data object. Empty objects and undefined values will not be cloned. This makes the data payload sent to MongoDB as small as possible.\n *\n * Functions are never cloned.\n *\n * @param {Object} obj the object to clone\n * @param {Object} options\n * @return {Object} the cloned object\n * @api private\n */\n\nexports.clone = function clone (obj, options) {\n  if (obj === undefined || obj === null)\n    return obj;\n\n  if (Array.isArray(obj))\n    return cloneArray(obj, options);\n\n  if (isMongooseObject(obj)) {\n    if (options && options.json && 'function' === typeof obj.toJSON) {\n      return obj.toJSON(options);\n    } else {\n      return obj.toObject(options);\n    }\n  }\n\n  if (obj.constructor) {\n    switch (exports.getFunctionName(obj.constructor)) {\n      case 'Object':\n        return cloneObject(obj, options);\n      case 'Date':\n        return new obj.constructor(+obj);\n      case 'RegExp':\n        return cloneRegExp(obj);\n      default:\n        // ignore\n        break;\n    }\n  }\n\n  if (obj instanceof ObjectId)\n    return new ObjectId(obj.id);\n\n  if (!obj.constructor && exports.isObject(obj)) {\n    // object created with Object.create(null)\n    return cloneObject(obj, options);\n  }\n\n  if (obj.valueOf)\n    return obj.valueOf();\n};\nvar clone = exports.clone;\n\n/*!\n * ignore\n */\n\nfunction cloneObject (obj, options) {\n  var retainKeyOrder = options && options.retainKeyOrder\n    , minimize = options && options.minimize\n    , ret = {}\n    , hasKeys\n    , keys\n    , val\n    , k\n    , i\n\n  if (retainKeyOrder) {\n    for (k in obj) {\n      val = clone(obj[k], options);\n\n      if (!minimize || ('undefined' !== typeof val)) {\n        hasKeys || (hasKeys = true);\n        ret[k] = val;\n      }\n    }\n  } else {\n    // faster\n\n    keys = Object.keys(obj);\n    i = keys.length;\n\n    while (i--) {\n      k = keys[i];\n      val = clone(obj[k], options);\n\n      if (!minimize || ('undefined' !== typeof val)) {\n        if (!hasKeys) hasKeys = true;\n        ret[k] = val;\n      }\n    }\n  }\n\n  return minimize\n    ? hasKeys && ret\n    : ret;\n};\n\nfunction cloneArray (arr, options) {\n  var ret = [];\n  for (var i = 0, l = arr.length; i < l; i++)\n    ret.push(clone(arr[i], options));\n  return ret;\n};\n\n/*!\n * Shallow copies defaults into options.\n *\n * @param {Object} defaults\n * @param {Object} options\n * @return {Object} the merged object\n * @api private\n */\n\nexports.options = function (defaults, options) {\n  var keys = Object.keys(defaults)\n    , i = keys.length\n    , k ;\n\n  options = options || {};\n\n  while (i--) {\n    k = keys[i];\n    if (!(k in options)) {\n      options[k] = defaults[k];\n    }\n  }\n\n  return options;\n};\n\n/*!\n * Generates a random string\n *\n * @api private\n */\n\nexports.random = function () {\n  return Math.random().toString().substr(3);\n};\n\n/*!\n * Merges `from` into `to` without overwriting existing properties.\n *\n * @param {Object} to\n * @param {Object} from\n * @api private\n */\n\nexports.merge = function merge (to, from) {\n  var keys = Object.keys(from)\n    , i = keys.length\n    , key;\n\n  while (i--) {\n    key = keys[i];\n    if ('undefined' === typeof to[key]) {\n      to[key] = from[key];\n    } else if (exports.isObject(from[key])) {\n      merge(to[key], from[key]);\n    }\n  }\n};\n\n/*!\n * toString helper\n */\n\nvar toString = Object.prototype.toString;\n\n/*!\n * Determines if `arg` is an object.\n *\n * @param {Object|Array|String|Function|RegExp|any} arg\n * @api private\n * @return {Boolean}\n */\n\nexports.isObject = function (arg) {\n  return '[object Object]' == toString.call(arg);\n}\n\n/*!\n * A faster Array.prototype.slice.call(arguments) alternative\n * @api private\n */\n\nexports.args = sliced;\n\n/*!\n * process.nextTick helper.\n *\n * Wraps `callback` in a try/catch + nextTick.\n *\n * node-mongodb-native has a habit of state corruption when an error is immediately thrown from within a collection callback.\n *\n * @param {Function} callback\n * @api private\n */\n\nexports.tick = function tick (callback) {\n  if ('function' !== typeof callback) return;\n  return function () {\n    try {\n      callback.apply(this, arguments);\n    } catch (err) {\n      // only nextTick on err to get out of\n      // the event loop and avoid state corruption.\n      process.nextTick(function () {\n        throw err;\n      });\n    }\n  }\n}\n\n/*!\n * Returns if `v` is a mongoose object that has a `toObject()` method we can use.\n *\n * This is for compatibility with libs like Date.js which do foolish things to Natives.\n *\n * @param {any} v\n * @api private\n */\n\nexports.isMongooseObject = function (v) {\n  Document || (Document = require('./document'));\n  MongooseArray || (MongooseArray = require('./types').Array);\n  MongooseBuffer || (MongooseBuffer = require('./types').Buffer);\n\n  return v instanceof Document ||\n         (v && v.isMongooseArray) ||\n         (v && v.isMongooseBuffer);\n};\nvar isMongooseObject = exports.isMongooseObject;\n\n/*!\n * Converts `expires` options of index objects to `expiresAfterSeconds` options for MongoDB.\n *\n * @param {Object} object\n * @api private\n */\n\nexports.expires = function expires (object) {\n  if (!(object && 'Object' == object.constructor.name)) return;\n  if (!('expires' in object)) return;\n\n  var when;\n  if ('string' != typeof object.expires) {\n    when = object.expires;\n  } else {\n    when = Math.round(ms(object.expires) / 1000);\n  }\n  object.expireAfterSeconds = when;\n  delete object.expires;\n};\n\n/*!\n * Converts arguments to ReadPrefs the driver\n * can understand.\n *\n * @TODO move this into the driver layer\n * @param {String|Array} pref\n * @param {Array} [tags]\n */\n\nexports.readPref = function readPref (pref, tags) {\n  if (Array.isArray(pref)) {\n    tags = pref[1];\n    pref = pref[0];\n  }\n\n  if (pref instanceof ReadPref) {\n    return pref;\n  }\n\n  switch (pref) {\n    case 'p':\n      pref = 'primary';\n      break;\n    case 'pp':\n      pref = 'primaryPreferred';\n      break;\n    case 's':\n      pref = 'secondary';\n      break;\n    case 'sp':\n      pref = 'secondaryPreferred';\n      break;\n    case 'n':\n      pref = 'nearest';\n      break;\n  }\n\n  return new ReadPref(pref, tags);\n};\n\n/*!\n * Populate options constructor\n */\n\nfunction PopulateOptions (path, select, match, options, model) {\n  this.path = path;\n  this.match = match;\n  this.select = select;\n  this.options = options;\n  this.model = model;\n  this._docs = {};\n}\n\n// make it compatible with utils.clone\nPopulateOptions.prototype.constructor = Object;\n\n// expose\nexports.PopulateOptions = PopulateOptions;\n\n/*!\n * populate helper\n */\n\nexports.populate = function populate (path, select, model, match, options) {\n  // The order of select/conditions args is opposite Model.find but\n  // necessary to keep backward compatibility (select could be\n  // an array, string, or object literal).\n\n  // might have passed an object specifying all arguments\n  if (1 === arguments.length) {\n    if (path instanceof PopulateOptions) {\n      return [path];\n    }\n\n    if (Array.isArray(path)) {\n      return path.map(function(o){\n        return exports.populate(o)[0];\n      });\n    }\n\n    if (exports.isObject(path)) {\n      match = path.match;\n      options = path.options;\n      select = path.select;\n      model = path.model;\n      path = path.path;\n    }\n  } else if ('string' !== typeof model && 'function' !== typeof model) {\n    options = match;\n    match = model;\n    model = undefined;\n  }\n\n  if ('string' != typeof path) {\n    throw new TypeError('utils.populate: invalid path. Expected string. Got typeof `' + typeof path + '`');\n  }\n\n  var ret = [];\n  var paths = path.split(' ');\n  for (var i = 0; i < paths.length; ++i) {\n    ret.push(new PopulateOptions(paths[i], select, match, options, model));\n  }\n\n  return ret;\n}\n\n/*!\n * Return the value of `obj` at the given `path`.\n *\n * @param {String} path\n * @param {Object} obj\n */\n\nexports.getValue = function (path, obj, map) {\n  return mpath.get(path, obj, '_doc', map);\n}\n\n/*!\n * Sets the value of `obj` at the given `path`.\n *\n * @param {String} path\n * @param {Anything} val\n * @param {Object} obj\n */\n\nexports.setValue = function (path, val, obj, map) {\n  mpath.set(path, val, obj, '_doc', map);\n}\n\n/*!\n * Returns an array of values from object `o`.\n *\n * @param {Object} o\n * @return {Array}\n * @private\n */\n\nexports.object = {};\nexports.object.vals = function vals (o) {\n  var keys = Object.keys(o)\n    , i = keys.length\n    , ret = [];\n\n  while (i--) {\n    ret.push(o[keys[i]]);\n  }\n\n  return ret;\n}\n\n/*!\n * @see exports.options\n */\n\nexports.object.shallowCopy = exports.options;\n\n/*!\n * Safer helper for hasOwnProperty checks\n *\n * @param {Object} obj\n * @param {String} prop\n */\n\nvar hop = Object.prototype.hasOwnProperty;\nexports.object.hasOwnProperty = function (obj, prop) {\n  return hop.call(obj, prop);\n}\n\n/*!\n * Determine if `val` is null or undefined\n *\n * @return {Boolean}\n */\n\nexports.isNullOrUndefined = function (val) {\n  return null == val\n}\n\n/*!\n * ignore\n */\n\nexports.array = {};\n\n/*!\n * Flattens an array.\n *\n * [ 1, [ 2, 3, [4] ]] -> [1,2,3,4]\n *\n * @param {Array} arr\n * @param {Function} [filter] If passed, will be invoked with each item in the array. If `filter` returns a falsey value, the item will not be included in the results.\n * @return {Array}\n * @private\n */\n\nexports.array.flatten = function flatten (arr, filter, ret) {\n  ret || (ret = []);\n\n  arr.forEach(function (item) {\n    if (Array.isArray(item)) {\n      flatten(item, filter, ret);\n    } else {\n      if (!filter || filter(item)) {\n        ret.push(item);\n      }\n    }\n  });\n\n  return ret;\n};\n\n/*!\n * Removes duplicate values from an array\n *\n * [1, 2, 3, 3, 5] => [1, 2, 3, 5]\n * [ ObjectId(\"550988ba0c19d57f697dc45e\"), ObjectId(\"550988ba0c19d57f697dc45e\") ]\n *    => [ObjectId(\"550988ba0c19d57f697dc45e\")]\n *\n * @param {Array} arr\n * @return {Array}\n * @private\n */\n\nexports.array.unique = function(arr) {\n  var primitives = {};\n  var ids = {};\n  var ret = [];\n  var length = arr.length;\n  for (var i = 0; i < length; ++i) {\n    if (typeof arr[i] === 'number' || typeof arr[i] === 'string') {\n      if (primitives[arr[i]]) {\n        continue;\n      }\n      ret.push(arr[i]);\n      primitives[arr[i]] = true;\n    } else if (arr[i] instanceof ObjectId) {\n      if (ids[arr[i].toString()]) {\n        continue;\n      }\n      ret.push(arr[i]);\n      ids[arr[i].toString()] = true;\n    } else {\n      ret.push(arr[i]);\n    }\n  }\n\n  return ret;\n};\n\n/*!\n * Determines if two buffers are equal.\n *\n * @param {Buffer} a\n * @param {Object} b\n */\n\nexports.buffer = {};\nexports.buffer.areEqual = function (a, b) {\n  if (!Buffer.isBuffer(a)) return false;\n  if (!Buffer.isBuffer(b)) return false;\n  if (a.length !== b.length) return false;\n  for (var i = 0, len = a.length; i < len; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n};\n\nexports.getFunctionName = function(fn) {\n  if (fn.name) {\n    return fn.name;\n  }\n  return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n};\n\nexports.decorate = function(destination, source) {\n  for (var key in source) {\n    destination[key] = source[key];\n  }\n};\n\n/**\n * merges to with a copy of from\n *\n * @param {Object} to\n * @param {Object} from\n * @api private\n */\n\nexports.mergeClone = function(to, from) {\n  var keys = Object.keys(from)\n    , i = keys.length\n    , key\n\n  while (i--) {\n    key = keys[i];\n    if ('undefined' === typeof to[key]) {\n      // make sure to retain key order here because of a bug handling the $each\n      // operator in mongodb 2.4.4\n      to[key] = exports.clone(from[key], { retainKeyOrder : 1});\n    } else {\n      if (exports.isObject(from[key])) {\n        exports.mergeClone(to[key], from[key]);\n      } else {\n        // make sure to retain key order here because of a bug handling the\n        // $each operator in mongodb 2.4.4\n        to[key] = exports.clone(from[key], { retainKeyOrder : 1});\n      }\n    }\n  }\n};\n\n/**\n * Executes a function on each element of an array (like _.each)\n *\n * @param {Array} arr\n * @param {Function} fn\n * @api private\n */\n\nexports.each = function(arr, fn) {\n  for (var i = 0; i < arr.length; ++i) {\n    fn(arr[i]);\n  }\n};\n\n"]}