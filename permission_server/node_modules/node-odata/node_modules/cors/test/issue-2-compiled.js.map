{"version":3,"sources":["issue-2.js"],"names":[],"mappings":";;;;;AAGA,AAAC,CAAA,YAAY;;AAEX,cAAY,CAAC;;AAEb,MAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC;MAC5B,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC;MAC5B,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC;MAChC,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC;MACxB,GAAG;MACH,WAAW,CAAC;;;;AAId,KAAG,GAAG,OAAO,EAAE,CAAC;AAChB,aAAW,GAAG;AACZ,UAAM,EAAE,IAAI;AACZ,WAAO,EAAE,CAAC,MAAM,CAAC;AACjB,eAAW,EAAE,IAAI;AACjB,UAAM,EAAE,IAAI;GACb,CAAC;AACF,KAAG,CAAC,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;;AAE7C,KAAG,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE;AAC5D,OAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;GACnB,CAAC,CAAC;;;;;AAKH,UAAQ,CAAC,WAAW,EAAE,YAAY;AAChC,MAAE,CAAC,eAAe,EAAE,UAAU,IAAI,EAAE;AAClC,eAAS,CAAC,GAAG,CAAC,CACX,OAAO,CAAC,YAAY,CAAC,CACrB,MAAM,CAAC,GAAG,CAAC,CACX,GAAG,CAAC,QAAQ,EAAE,oBAAoB,CAAC,CACnC,GAAG,CAAC,UAAU,GAAG,EAAE,GAAG,EAAE;AACvB,cAAM,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACtB,WAAG,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;AAC5E,YAAI,EAAE,CAAC;OACR,CAAC,CAAC;KACN,CAAC,CAAC;AACH,MAAE,CAAC,YAAY,EAAE,UAAU,IAAI,EAAE;AAC/B,eAAS,CAAC,GAAG,CAAC,CACX,IAAI,CAAC,YAAY,CAAC,CAClB,MAAM,CAAC,GAAG,CAAC,CACX,GAAG,CAAC,QAAQ,EAAE,oBAAoB,CAAC,CACnC,GAAG,CAAC,UAAU,GAAG,EAAE,GAAG,EAAE;AACvB,cAAM,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACtB,WAAG,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;AAC5E,WAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAC7B,YAAI,EAAE,CAAC;OACR,CAAC,CAAC;KACN,CAAC,CAAC;GACJ,CAAC,CAAC;CAEJ,CAAA,EAAE,CAAE","file":"issue-2-compiled.js","sourcesContent":["/*jslint indent: 2*/\n/*global require: true, module: true, describe: true, it: true*/\n\n(function () {\n\n  'use strict';\n\n  var should = require('should'),\n    express = require('express'),\n    supertest = require('supertest'),\n    cors = require('../lib'),\n    app,\n    corsOptions;\n\n  /* -------------------------------------------------------------------------- */\n\n  app = express();\n  corsOptions = {\n    origin: true,\n    methods: ['POST'],\n    credentials: true,\n    maxAge: 3600\n  };\n  app.options('/api/login', cors(corsOptions));\n  /*jslint unparam: true*/ // `req` is part of the signature, but not used in this route\n  app.post('/api/login', cors(corsOptions), function (req, res) {\n    res.send('LOGIN');\n  });\n  /*jslint unparam: false*/\n\n  /* -------------------------------------------------------------------------- */\n\n  describe('issue  #2', function () {\n    it('OPTIONS works', function (done) {\n      supertest(app)\n        .options('/api/login')\n        .expect(204)\n        .set('Origin', 'http://example.com')\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('http://example.com');\n          done();\n        });\n    });\n    it('POST works', function (done) {\n      supertest(app)\n        .post('/api/login')\n        .expect(200)\n        .set('Origin', 'http://example.com')\n        .end(function (err, res) {\n          should.not.exist(err);\n          res.headers['access-control-allow-origin'].should.eql('http://example.com');\n          res.text.should.eql('LOGIN');\n          done();\n        });\n    });\n  });\n\n}());\n\n"]}