{"version":3,"sources":["parser.js"],"names":[],"mappings":"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","file":"parser-compiled.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar isField = function isField(obj) {\n  if (typeof obj === 'function') {\n    return true;\n  }\n  if (typeof obj === 'object') {\n    if (obj.type && typeof obj.type === 'function') {\n      // 检测该 obj 下字段, 如果有除了 type 以外是 function 类型的字段, 表明该 obj 不是基本类型\n      for (var _name in obj) {\n        if (_name !== 'type' && typeof obj[_name] === 'function') {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n  return false;\n};\n\nvar isArray = function isArray(obj) {\n  return Array.isArray(obj) && obj.length >= 0;\n};\n\nvar isComplexArray = function isComplexArray(obj) {\n  return isArray(obj) && isField(obj[0]);\n};\n\nvar isObject = function isObject(obj) {\n  return obj && typeof obj === 'object' && !isArray(obj) && !isField(obj);\n};\n\nvar toMetadata = function toMetadata(obj) {\n  var convert = function convert(obj, name, root) {\n    var LEN = 'function '.length;\n    if (isField(obj[name])) {\n      if (typeof obj[name] === 'function') {\n        obj[name] = obj[name].toString();\n        obj[name] = obj[name].substr(LEN, obj[name].indexOf('(') - LEN);\n      } else if (typeof obj[name] === 'object') {\n        obj[name].type = obj[name].type.toString();\n        obj[name].type = obj[name].type.substr(LEN, obj[name].type.indexOf('(') - LEN);\n      }\n    } else if (isComplexArray(obj[name])) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = obj[name][0][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var childName = _step.value;\n\n          convert(obj[name][0], childName);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator['return']) {\n            _iterator['return']();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    } else if (isArray(obj[name])) {\n      obj[name][0] = obj[name][0].toString();\n      obj[name][0] = obj[name][0].substr(LEN, obj[name][0].indexOf('(') - LEN);\n    } else if (isObject(obj[name])) {\n      Object.keys(obj[name]).map(function (childName) {\n        convert(obj[name], childName);\n      });\n    }\n  };\n  convert({ obj: obj }, 'obj', true);\n  return obj;\n};\n\nexports['default'] = { toMetadata: toMetadata };\nmodule.exports = exports['default'];"]}