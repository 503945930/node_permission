{"version":3,"sources":["functionsParser.js"],"names":[],"mappings":"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","file":"functionsParser-compiled.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _slicedToArray(arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }\n\n// indexof(CompanyName,'X') eq 1\nvar indexof = function indexof(query, key, odataOperator, value) {\n  var target = undefined;\n\n  var _key$substring$split = key.substring(key.indexOf('(') + 1, key.indexOf(')')).split(',');\n\n  var _key$substring$split2 = _slicedToArray(_key$substring$split, 2);\n\n  key = _key$substring$split2[0];\n  target = _key$substring$split2[1];\n  var _ref = [key.trim(), target.trim()];\n  key = _ref[0];\n  target = _ref[1];\n\n  var operator = convertToOperator(odataOperator);\n  query.$where('this.' + key + '.indexOf(' + target + ') ' + operator + ' ' + value);\n};\n\n// year(publish_date) eq 2000\nvar year = function year(query, key, odataOperator, value) {\n  key = key.substring(key.indexOf('(') + 1, key.indexOf(')'));\n\n  var start = new Date(+value, 0, 1);\n  var end = new Date(+value + 1, 0, 1);\n\n  switch (odataOperator) {\n    case 'eq':\n      query.where(key).gte(start).lt(end);\n      break;\n    case 'ne':\n      var condition = [{}, {}];\n      condition[0][key] = { $lt: start };\n      condition[1][key] = { $gte: end };\n      query.or(condition);\n      break;\n    case 'gt':\n      query.where(key).gte(end);\n      break;\n    case 'ge':\n      query.where(key).gte(start);\n      break;\n    case 'lt':\n      query.where(key).lt(start);\n      break;\n    case 'le':\n      query.where(key).lt(end);\n      break;\n  }\n};\n\nvar convertToOperator = function convertToOperator(odataOperator) {\n  var operator = undefined;\n  switch (odataOperator) {\n    case 'eq':\n      operator = '==';\n      break;\n    case 'ne':\n      operator = '!=';\n      break;\n    case 'gt':\n      operator = '>';\n      break;\n    case 'ge':\n      operator = '>=';\n      break;\n    case 'lt':\n      operator = '<';\n      break;\n    case 'le':\n      operator = '<=';\n      break;\n  }\n  return operator;\n};\n\nexports['default'] = { indexof: indexof, year: year };\nmodule.exports = exports['default'];"]}