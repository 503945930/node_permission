{"version":3,"sources":["utils.js"],"names":[],"mappings":"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","file":"utils-compiled.js","sourcesContent":["/*!\n * express\n * Copyright(c) 2009-2013 TJ Holowaychuk\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n * @api private\n */\n\nvar contentDisposition = require('content-disposition');\nvar contentType = require('content-type');\nvar deprecate = require('depd')('express');\nvar mime = require('send').mime;\nvar basename = require('path').basename;\nvar etag = require('etag');\nvar proxyaddr = require('proxy-addr');\nvar qs = require('qs');\nvar querystring = require('querystring');\n\n/**\n * Return strong ETag for `body`.\n *\n * @param {String|Buffer} body\n * @param {String} [encoding]\n * @return {String}\n * @api private\n */\n\nexports.etag = function (body, encoding) {\n  var buf = !Buffer.isBuffer(body)\n    ? new Buffer(body, encoding)\n    : body;\n\n  return etag(buf, {weak: false});\n};\n\n/**\n * Return weak ETag for `body`.\n *\n * @param {String|Buffer} body\n * @param {String} [encoding]\n * @return {String}\n * @api private\n */\n\nexports.wetag = function wetag(body, encoding){\n  var buf = !Buffer.isBuffer(body)\n    ? new Buffer(body, encoding)\n    : body;\n\n  return etag(buf, {weak: true});\n};\n\n/**\n * Check if `path` looks absolute.\n *\n * @param {String} path\n * @return {Boolean}\n * @api private\n */\n\nexports.isAbsolute = function(path){\n  if ('/' == path[0]) return true;\n  if (':' == path[1] && '\\\\' == path[2]) return true;\n  if ('\\\\\\\\' == path.substring(0, 2)) return true; // Microsoft Azure absolute path\n};\n\n/**\n * Flatten the given `arr`.\n *\n * @param {Array} arr\n * @return {Array}\n * @api private\n */\n\nexports.flatten = function(arr, ret){\n  ret = ret || [];\n  var len = arr.length;\n  for (var i = 0; i < len; ++i) {\n    if (Array.isArray(arr[i])) {\n      exports.flatten(arr[i], ret);\n    } else {\n      ret.push(arr[i]);\n    }\n  }\n  return ret;\n};\n\n/**\n * Normalize the given `type`, for example \"html\" becomes \"text/html\".\n *\n * @param {String} type\n * @return {Object}\n * @api private\n */\n\nexports.normalizeType = function(type){\n  return ~type.indexOf('/')\n    ? acceptParams(type)\n    : { value: mime.lookup(type), params: {} };\n};\n\n/**\n * Normalize `types`, for example \"html\" becomes \"text/html\".\n *\n * @param {Array} types\n * @return {Array}\n * @api private\n */\n\nexports.normalizeTypes = function(types){\n  var ret = [];\n\n  for (var i = 0; i < types.length; ++i) {\n    ret.push(exports.normalizeType(types[i]));\n  }\n\n  return ret;\n};\n\n/**\n * Generate Content-Disposition header appropriate for the filename.\n * non-ascii filenames are urlencoded and a filename* parameter is added\n *\n * @param {String} filename\n * @return {String}\n * @api private\n */\n\nexports.contentDisposition = deprecate.function(contentDisposition,\n  'utils.contentDisposition: use content-disposition npm module instead');\n\n/**\n * Parse accept params `str` returning an\n * object with `.value`, `.quality` and `.params`.\n * also includes `.originalIndex` for stable sorting\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction acceptParams(str, index) {\n  var parts = str.split(/ *; */);\n  var ret = { value: parts[0], quality: 1, params: {}, originalIndex: index };\n\n  for (var i = 1; i < parts.length; ++i) {\n    var pms = parts[i].split(/ *= */);\n    if ('q' == pms[0]) {\n      ret.quality = parseFloat(pms[1]);\n    } else {\n      ret.params[pms[0]] = pms[1];\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Compile \"etag\" value to function.\n *\n * @param  {Boolean|String|Function} val\n * @return {Function}\n * @api private\n */\n\nexports.compileETag = function(val) {\n  var fn;\n\n  if (typeof val === 'function') {\n    return val;\n  }\n\n  switch (val) {\n    case true:\n      fn = exports.wetag;\n      break;\n    case false:\n      break;\n    case 'strong':\n      fn = exports.etag;\n      break;\n    case 'weak':\n      fn = exports.wetag;\n      break;\n    default:\n      throw new TypeError('unknown value for etag function: ' + val);\n  }\n\n  return fn;\n}\n\n/**\n * Compile \"query parser\" value to function.\n *\n * @param  {String|Function} val\n * @return {Function}\n * @api private\n */\n\nexports.compileQueryParser = function compileQueryParser(val) {\n  var fn;\n\n  if (typeof val === 'function') {\n    return val;\n  }\n\n  switch (val) {\n    case true:\n      fn = querystring.parse;\n      break;\n    case false:\n      fn = newObject;\n      break;\n    case 'extended':\n      fn = qs.parse;\n      break;\n    case 'simple':\n      fn = querystring.parse;\n      break;\n    default:\n      throw new TypeError('unknown value for query parser function: ' + val);\n  }\n\n  return fn;\n}\n\n/**\n * Compile \"proxy trust\" value to function.\n *\n * @param  {Boolean|String|Number|Array|Function} val\n * @return {Function}\n * @api private\n */\n\nexports.compileTrust = function(val) {\n  if (typeof val === 'function') return val;\n\n  if (val === true) {\n    // Support plain true/false\n    return function(){ return true };\n  }\n\n  if (typeof val === 'number') {\n    // Support trusting hop count\n    return function(a, i){ return i < val };\n  }\n\n  if (typeof val === 'string') {\n    // Support comma-separated values\n    val = val.split(/ *, */);\n  }\n\n  return proxyaddr.compile(val || []);\n}\n\n/**\n * Set the charset in a given Content-Type string.\n *\n * @param {String} type\n * @param {String} charset\n * @return {String}\n * @api private\n */\n\nexports.setCharset = function setCharset(type, charset) {\n  if (!type || !charset) {\n    return type;\n  }\n\n  // parse type\n  var parsed = contentType.parse(type);\n\n  // set charset\n  parsed.parameters.charset = charset;\n\n  // format type\n  return contentType.format(parsed);\n};\n\n/**\n * Return new empty object.\n *\n * @return {Object}\n * @api private\n */\n\nfunction newObject() {\n  return {};\n}\n"]}