{"version":3,"sources":["promise.test.js"],"names":[],"mappings":"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","file":"promise.test-compiled.js","sourcesContent":["/*global describe,it */\n/**\n * Module dependencies.\n */\n\nvar assert = require('assert');\nvar Promise = require('../');\n\n/**\n * Test.\n */\n\ndescribe('promise', function () {\n  it('events fire right after fulfill()', function (done) {\n    var promise = new Promise()\n      , called = 0;\n\n    promise.on('fulfill', function (a, b) {\n      assert.equal(a, '1');\n      assert.equal(b, '2');\n      called++;\n    });\n\n    promise.fulfill('1', '2');\n\n    promise.on('fulfill', function (a, b) {\n      assert.equal(a, '1');\n      assert.equal(b, '2');\n      called++;\n    });\n\n    assert.equal(2, called);\n    done();\n  });\n\n  it('events fire right after reject()', function (done) {\n    var promise = new Promise()\n      , called = 0;\n\n    promise.on('reject', function (err) {\n      assert.ok(err instanceof Error);\n      called++;\n    });\n\n    promise.reject(new Error('booyah'));\n\n    promise.on('reject', function (err) {\n      assert.ok(err instanceof Error);\n      called++;\n    });\n\n    assert.equal(2, called);\n    done()\n  });\n\n  describe('onResolve()', function () {\n    it('from constructor works', function (done) {\n      var called = 0;\n\n      var promise = new Promise(function (err) {\n        assert.ok(err instanceof Error);\n        called++;\n      });\n\n      promise.reject(new Error('dawg'));\n\n      assert.equal(1, called);\n      done();\n    });\n\n    it('after fulfill()', function (done) {\n      var promise = new Promise()\n        , called = 0;\n\n      promise.fulfill('woot');\n\n      promise.onResolve(function (err, data) {\n        assert.equal(data, 'woot');\n        called++;\n      });\n\n      promise.onResolve(function (err) {\n        assert.strictEqual(err, null);\n        called++;\n      });\n\n      assert.equal(2, called);\n      done();\n    })\n  });\n\n  describe('onFulfill shortcut', function () {\n    it('works', function (done) {\n      var promise = new Promise()\n        , called = 0;\n\n      promise.onFulfill(function (woot) {\n        assert.strictEqual(woot, undefined);\n        called++;\n      });\n\n      promise.fulfill();\n\n      assert.equal(1, called);\n      done();\n    });\n  });\n\n  describe('onReject shortcut', function () {\n    it('works', function (done) {\n      var promise = new Promise()\n        , called = 0;\n\n      promise.onReject(function (err) {\n        assert.ok(err instanceof Error);\n        called++;\n      });\n\n      promise.reject(new Error);\n      assert.equal(1, called);\n      done();\n    })\n  });\n\n  describe('return values', function () {\n    it('on()', function (done) {\n      var promise = new Promise();\n      assert.ok(promise.on('jump', function () {}) instanceof Promise);\n      done()\n    });\n\n    it('onFulfill()', function (done) {\n      var promise = new Promise();\n      assert.ok(promise.onFulfill(function () {}) instanceof Promise);\n      done();\n    });\n    it('onReject()', function (done) {\n      var promise = new Promise();\n      assert.ok(promise.onReject(function () {}) instanceof Promise);\n      done();\n    });\n    it('onResolve()', function (done) {\n      var promise = new Promise();\n      assert.ok(promise.onResolve(function () {}) instanceof Promise);\n      done();\n    })\n  });\n\n  describe('casting errors', function () {\n    describe('reject()', function () {\n      it('does not cast arguments to Error', function (done) {\n        var p = new Promise(function (err) {\n          assert.equal(3, err);\n          done();\n        });\n\n        p.reject(3);\n      })\n    })\n  });\n\n  describe('then', function () {\n    describe('catching', function () {\n      it('should not catch returned promise fulfillments', function (done) {\n        var errorSentinal\n          , p = new Promise;\n        p.then(function () { throw errorSentinal = new Error(\"boo!\") });\n\n        p.fulfill();\n        done();\n      });\n\n\n      it('should not catch returned promise fulfillments even async', function (done) {\n        var errorSentinal\n          , p = new Promise;\n        p.then(function () { throw errorSentinal = new Error(\"boo!\") });\n\n        setTimeout(function () {\n          p.fulfill();\n          done();\n        }, 10);\n      });\n\n\n      it('can be disabled using .end()', function (done) {\n        if (process.version.indexOf('v0.8') == 0) return done();\n        var errorSentinal\n          , overTimeout\n          , domain = require('domain').create();\n\n        domain.once('error', function (err) {\n          assert(err, errorSentinal);\n          clearTimeout(overTimeout);\n          done()\n        });\n\n        domain.run(function () {\n          var p = new Promise;\n          var p2 = p.then(function () {\n            throw errorSentinal = new Error('shucks')\n          });\n          p2.end();\n\n          p.fulfill();\n        });\n        overTimeout = setTimeout(function () { done(new Error('error was swallowed')); }, 10);\n      });\n\n\n      it('can be disabled using .end() even when async', function (done) {\n        if (process.version.indexOf('v0.10') != 0) return done();\n        var errorSentinal\n          , overTimeout\n          , domain = require('domain').create();\n\n        domain.on('error', function (err) {\n          assert(err, errorSentinal);\n          clearTimeout(overTimeout);\n          done()\n        });\n\n        domain.run(function () {\n          var p = new Promise;\n          var p2 = p.then(function () {\n            throw errorSentinal = new Error(\"boo!\")\n          });\n          p2.end();\n\n          setTimeout(function () {p.fulfill();}, 10);\n        });\n        overTimeout = setTimeout(function () { done(new Error('error was swallowed')); }, 20);\n      });\n\n\n      it('can be handled using .end() so no throwing', function (done) {\n        var errorSentinal\n          , overTimeout\n          , domain = require('domain').create();\n\n        domain.run(function () {\n          var p = new Promise;\n          var p2 = p.then(function () {\n            throw errorSentinal = new Error(\"boo!\")\n          });\n          p2.end(function (err) {\n            assert.equal(err, errorSentinal);\n            clearTimeout(overTimeout);\n            done()\n          });\n\n          setTimeout(function () {p.fulfill();}, 10);\n        });\n        overTimeout = setTimeout(function () { done(new Error('error was swallowed')); }, 20);\n      });\n\n    });\n\n    it('persistent', function (done) {\n      var p = new Promise;\n      v = null;\n\n      function ensure(val) {\n        v = v || val;\n        assert.equal(v, val);\n      }\n\n      function guard() {\n        throw new Error('onReject should not be called');\n      }\n\n      p.then(ensure, guard).end();\n\n      p.fulfill('foo');\n      p.fulfill('bar');\n      p.reject(new Error('baz'));\n\n      p.then(ensure, guard).end();\n\n      setTimeout(done, 0);\n    });\n\n\n    it('accepts multiple completion values', function (done) {\n      var p = new Promise;\n\n      p.then(function (a, b) {\n        assert.equal(2, arguments.length);\n        assert.equal('hi', a);\n        assert.equal(4, b);\n        done();\n      }, done).end();\n\n      p.fulfill('hi', 4);\n    })\n  });\n\n  describe('fulfill values and splats', function () {\n    it('should handle multiple values', function (done) {\n      var p = new Promise;\n      p.onFulfill(function (a, b, c) {\n        assert.equal('a', a);\n        assert.equal('b', b);\n        assert.equal('c', c);\n        done();\n      });\n      p.fulfill('a', 'b', 'c');\n    });\n\n    it('should handle multiple values from a then', function (done) {\n      Promise.fulfilled().then(\n        function () {\n          return Promise.fulfilled().then(\n            function () {\n              var p = new Promise;\n              p.fulfill('a', 'b', 'c');\n              return p;\n            }\n          );\n        }\n      ).onFulfill(\n        function (a, b, c) {\n          assert.equal('a', a);\n          assert.equal('b', b);\n          assert.equal('c', c);\n          done();\n        }\n      ).end()\n    });\n\n    it('should work with `fulfilled` convenience method', function (done) {\n      Promise.fulfilled('a', 'b', 'c').then(function (a, b, c) {\n        assert.equal('a', a);\n        assert.equal('b', b);\n        assert.equal('c', c);\n        done();\n      })\n    });\n  });\n\n\n  describe('end', function () {\n    it(\"should return the promise\", function (done) {\n      var p = new Promise;\n      var p1 = p.end();\n      assert.equal(p, p1);\n      done();\n    });\n\n\n    it(\"should throw for chain\", function (done) {\n      var p = new Promise;\n      p.then().then().then().then().end();\n      try {\n        p.reject('bad');\n      } catch (e) {\n        done();\n      }\n    });\n\n\n    it(\"should not throw for chain with reject handler\", function (done) {\n      var p = new Promise;\n      p.then().then().then().then().end(function () {\n        done();\n      });\n      try {\n        p.reject('bad');\n      } catch (e) {\n        done(e);\n      }\n    });\n  });\n\n\n  describe('chain', function () {\n    it('should propagate fulfillment', function (done) {\n      var varSentinel = {a: 'a'};\n      var p1 = new Promise;\n      p1.chain(new Promise(function (err, doc) {\n        assert.equal(doc, varSentinel);\n        done();\n      }));\n      p1.fulfill(varSentinel);\n    });\n\n\n    it('should propagate rejection', function (done) {\n      var e = new Error(\"gaga\");\n      var p1 = new Promise;\n      p1.chain(new Promise(function (err) {\n        assert.equal(err, e);\n        done();\n      }));\n      p1.reject(e);\n    });\n\n\n    it('should propagate resolution err', function (done) {\n      var e = new Error(\"gaga\");\n      var p1 = new Promise;\n      p1.chain(new Promise(function (err) {\n        assert.equal(err, e);\n        done();\n      }));\n      p1.resolve(e);\n    });\n\n\n    it('should propagate resolution val', function (done) {\n      var varSentinel = {a: 'a'};\n      var p1 = new Promise;\n      p1.chain(new Promise(function (err, val) {\n        assert.equal(val, varSentinel);\n        done();\n      }));\n      p1.resolve(null, varSentinel);\n    })\n  });\n\n\n  describe(\"all\", function () {\n    it(\"works\", function (done) {\n      var count = 0;\n      var p = new Promise;\n      var p2 = p.all(function () {\n        return [\n          (function () {\n            var p = new Promise();\n            count++;\n            p.resolve();\n            return p;\n          })()\n          , (function () {\n            var p = new Promise();\n            count++;\n            p.resolve();\n            return p;\n          })()\n        ];\n      });\n      p2.then(function () {\n        assert.equal(count, 2);\n        done();\n      });\n      p.resolve();\n    });\n\n\n    it(\"handles rejects\", function (done) {\n      var count = 0;\n      var p = new Promise;\n      var p2 = p.all(function () {\n        return [\n          (function () {\n            var p = new Promise();\n            count++;\n            p.resolve();\n            return p;\n          })()\n          , (function () {\n            count++;\n            throw new Error(\"gaga\");\n          })()\n        ];\n      });\n      p2.onReject(function (err) {\n        assert(err.message, \"gaga\");\n        assert.equal(count, 2);\n        done();\n      });\n      p.resolve();\n    });\n  });\n\n\n  describe(\"deferred\", function () {\n    it(\"works\", function (done) {\n      var d = Promise.deferred();\n      assert.ok(d.promise instanceof Promise);\n      assert.ok(d.reject instanceof Function);\n      assert.ok(d.resolve instanceof Function);\n      assert.ok(d.callback instanceof Function);\n      done();\n    });\n  });\n\n\n  describe(\"hook\", function () {\n    it(\"works\", function (done) {\n      var run = 0;\n      var l1 = function (ser, par) {\n        run++;\n        ser();\n        par();\n      };\n      Promise.hook([l1, l1, l1]).then(function () {\n        assert(run, 3);\n        done();\n      })\n\n    });\n\n\n    it(\"works with async serial hooks\", function (done) {\n      this.timeout(800);\n      var run = 0;\n      var l1 = function (ser, par) {\n        run++;\n        setTimeout(function () {ser();}, 200);\n        par();\n      };\n      Promise.hook([l1, l1, l1]).then(function () {\n        assert(run, 3);\n        done();\n      })\n    });\n\n\n    it(\"works with async parallel hooks\", function (done) {\n      this.timeout(400);\n      var run = 0;\n      var l1 = function (ser, par) {\n        run++;\n        ser();\n        setTimeout(function () {par();}, 200);\n      };\n      Promise.hook([l1, l1, l1]).then(function () {\n        assert(run, 3);\n        done();\n      })\n    });\n\n\n    it(\"catches errors in hook logic\", function (done) {\n      var run = 0;\n      var l1 = function (ser, par) {\n        run++;\n        ser();\n        par();\n      };\n      var l2 = function (ser, par) {\n        run++;\n        ser();\n        par();\n        throw new Error(\"err\")\n      };\n      Promise.hook([l1, l2, l1]).end(function (err) {\n        assert(run, 2);\n        done();\n      });\n    });\n  });\n});\n"]}