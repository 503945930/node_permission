{"version":3,"sources":["t1.js"],"names":[],"mappings":";;AAAA,IAAI,QAAQ,GAAG,IAAI,CAAC;;AAEpB,IAAI,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC;;AAE5C,SAAS,gBAAgB,CAAC,QAAQ,EAAE;AAClC,MAAI,QAAQ,IAAI,IAAI,EAAE;AACpB,YAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;GAC1B,MAAM;AACL,QAAI,UAAU,GAAG,mCAAmC,CAAC;AACrD,eAAW,CAAC,OAAO,CAAC,UAAU,EAAE;AAC9B,YAAM,EAAG;AACP,sBAAc,EAAG,CAAC;AAClB,yBAAiB,EAAE,IAAI;AACvB,qBAAa,EAAG,IAAI;OACrB;KACF,EAAE,UAAU,GAAG,EAAE,EAAE,EAAE;AACpB,cAAQ,GAAG,EAAE,CAAC;AACd,cAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;KACnB,CAAC,CAAC;GACJ;CACF;;AAED,SAAS,GAAG,CAAC,OAAO,EAAE;AACpB,SAAO,CAAC,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,OAAO,CAAC,CAAC;CAClC;;AAED,IAAI,WAAW,GAAG,CAAC,CAAC;;AAEpB,SAAS,UAAU,CAAC,EAAE,EAAE;AACtB,MAAI,aAAa,GAAG,WAAW,CAAC;AAChC,IAAE,WAAW,CAAC;AACd,KAAG,CAAC,QAAQ,GAAG,aAAa,GAAG,WAAW,CAAC,CAAC;;AAE5C,YAAU,CAAC,YAAW;AAClB,cAAU,CAAC,EAAE,CAAC,CAAC;GAClB,EAAE,IAAI,CAAC,CAAC;;AAET,MAAI,UAAU,GAAG,EAAE,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;AAClD,YAAU,CAAC,OAAO,CAAC,EAAE,EACnB,UAAU,GAAG,EAAE,MAAM,EAAE;AACrB,QAAI,GAAG,IAAI,IAAI,EAAE;AACf,SAAG,CAAC,QAAQ,GAAG,aAAa,GAAG,oBAAoB,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;AACnE,aAAO;KACR;AACD,OAAG,CAAC,QAAQ,GAAG,aAAa,GAAG,qBAAqB,GAAG,MAAM,CAAC,CAAC;GAChE,CACF,CAAC;CACH;;AAED,gBAAgB,CACd,UAAS,GAAG,EAAE,EAAE,EAAE;AAChB,MAAI,GAAG,IAAI,IAAI,EAAE;AACf,OAAG,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACjB,WAAO;GACR;;AAED,YAAU,CAAC,EAAE,CAAC,CAAC;CAChB,CACF,CAAC","file":"t1-compiled.js","sourcesContent":["var database = null;\n\nvar MongoClient = require('./').MongoClient;\n\nfunction connect_to_mongo(callback) {\n  if (database != null) {\n    callback(null, database);\n  } else {\n    var connection = \"mongodb://127.0.0.1:27017/test_db\";\n    MongoClient.connect(connection, {\n      server : {\n        reconnectTries : 5,\n        reconnectInterval: 1000,\n        autoReconnect : true\n      }\n    }, function (err, db) {\n      database = db;\n      callback(err, db);\n    });\n  }\n}\n\nfunction log(message) {\n  console.log(new Date(), message);\n}\n\nvar queryNumber = 0;\n\nfunction make_query(db) {\n  var currentNumber = queryNumber;\n  ++queryNumber;\n  log(\"query \" + currentNumber + \": started\");\n  \n  setTimeout(function() {\n      make_query(db);\n  }, 5000);\n  \n  var collection = db.collection('test_collection');\n  collection.findOne({},\n    function (err, result) {\n      if (err != null) {\n        log(\"query \" + currentNumber + \": find one error: \" + err.message);\n        return;\n      }\n      log(\"query \" + currentNumber + \": find one result: \" + result);\n    }\n  );\n}\n\nconnect_to_mongo(\n  function(err, db) {\n    if (err != null) {\n      log(err.message);\n      return;\n    }\n\n    make_query(db);\n  }\n);\n"]}