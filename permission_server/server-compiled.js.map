{"version":3,"sources":["server.js"],"names":[],"mappings":";;;;;AAGA,IAAI,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC;IAC7B,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC;IAC1B,WAAW,GAAG,OAAO,CAAC,0BAA0B,CAAC;IACjD,YAAY,GAAG,OAAO,CAAC,cAAc,CAAC;IACtC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;;AAK3B,IAAI,MAAM,GAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;;;AAG1C,IAAI,MAAM,GAAG,KAAK,CAAC,qCAAqC,CAAC,CAAC;AAC1D,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;;;AAGnC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC;AAClD,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC;AAC1B,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC;AACZ,kBAAc,EAAE,eAAe;CAClC,CAAC,CAAC,CAAC;AACJ,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;;AAE5B,IAAI,MAAM,CAAC,OAAO,KAAK,aAAa,EAAE;;AAElC,UAAM,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,CAAA;CAC7B;;;AAGD,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;;;AAI3B,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC;;;AAGzC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC;AAC/C,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,EAAE,YAAY;;AAExD,WAAO,CAAC,uBAAuB,CAAC,UAAO,EAAE,CAAC;AAC1C,WAAO,CAAC,GAAG,CAAC,mCAAmC,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC;CAChF,CAAC,CAAC","file":"server-compiled.js","sourcesContent":["/**\r\n * Created by Administrator on 2015/10/17 0017.\r\n */\r\nvar odata = require('node-odata'),\r\n    morgan = require('morgan'),\r\n    domainError = require('./middleware/domainError'),\r\n    errorhandler = require('errorhandler'),\r\n    cors = require('cors');\r\n\r\n\r\n\r\n//config\r\nvar config=require(\"./config/dev_config\");\r\n\r\n//connect mongodb\r\nvar server = odata('mongodb://localhost/permission_test');\r\nodata.resources = server.resources;\r\n//middleware\r\n\r\nserver.use(require(\"./middleware/authorization\"));\r\nserver.use(domainError());\r\nserver.use(cors({\r\n    exposedHeaders: \"authorization\"\r\n}));\r\nserver.use(morgan(\"short\"));\r\n\r\nif (config.dev_env === 'development') {\r\n    // only use in development\r\n    server.use(errorhandler())\r\n}\r\n\r\n//server set\r\nserver.set('prefix', \"v1\");\r\n\r\n\r\n//functions\r\nserver.use(require('./functions/login'));\r\n\r\n//resources\r\nserver.use(require('./resources/system/user'));\r\nserver.listen(config.dev_por || config.pro_por, function () {\r\n\r\n    require('./bootstrap/init-data').import();\r\n    console.log('Express server listening on port ' + process.env.PORT || 40002);\r\n});"]}