{"version":3,"sources":["authorization.js"],"names":[],"mappings":";;;;;;AAKA,IAAI,SAAS,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC;;AAEhD,MAAM,CAAC,OAAO,GAAG,UAAS,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;AACtC,QAAI,KAAK,CAAC;AACV,SAAK,GAAG,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC;AAClC,QAAI,CAAC,KAAK,EAAE;AACR,eAAO,IAAI,EAAE,CAAC;KACjB;AACD,WAAO,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC;AAC3B,aAAK,EAAE,KAAK;KACf,CAAC,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE,IAAI,EAAE;AACxB,YAAI,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;AACrB,eAAG,CAAC,IAAI,GAAG,IAAI,CAAC;SACnB;AACD,eAAO,IAAI,EAAE,CAAC;KACjB,CAAC,CAAC;CACN,CAAC","file":"authorization-compiled.js","sourcesContent":["/**\r\n * Created by Administrator on 2015/9/6 0006.\r\n */\r\n\r\n\r\nvar resources = require('node-odata').resources;\r\n\r\nmodule.exports = function(req, res, next) {\r\n    var token;\r\n    token = req.headers.authorization;\r\n    if (!token) {\r\n        return next();\r\n    }\r\n    return resources.users.findOne({\r\n        token: token\r\n    }).exec(function(err, user) {\r\n        if (user && user.states) {\r\n            req.user = user;\r\n        }\r\n        return next();\r\n    });\r\n};"]}